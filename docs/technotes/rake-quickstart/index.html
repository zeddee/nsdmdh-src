<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="Zed Tan">
    <title>Getting Started with Rake | NSDMDH</title>
    <link rel="stylesheet" href="/css/main.css" />
    <meta property="og:title" content="Getting Started with Rake" />
  <meta property="og:description" content="Rake is a task runner that uses Ruby.
To get rake up and running, just run:
gem install rake
It&rsquo;s useful for running deploy scripts and generally getting things up and running in your dev environments.
What you need is a Rakefile in your dev environment&rsquo;s root folder (or wherever you want to run the rake command).
Write a Ruby script in the Rakefile and run rake — and it&rsquo;ll get to work." />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://www.nsdmdh.com/technotes/rake-quickstart/" />
  
    
        <meta property="og:image" content="http://www.nsdmdh.com/img/colours/goldfish.png" />
    
  
  
  
  
  
  
  
  
  
  
    
        
          
            <meta property="article:tag" content="Technotes" />
          
            <meta property="article:tag" content="Zed" />
          
        
      

  </head>

  <body>
  <header>
<nav class="menu">
  <ul>
    <li><h1 class="mainTitle"><a href="/">NSDMDH</a></h1></li>
    <ul>
    
    
    <li>
      <a href="http://www.nsdmdh.com">home/nsdmdh</a>
    </li>
    
      
      <li>
        <a href="/essays/">essays</a>
      </li>
    
      
      <li>
        <a href="/posts/">posts</a>
      </li>
    
      
      <li>
        <a href="/surfaceintervals/">surfaceintervals</a>
      </li>
    
      
      <li>
        <a href="/technotes/">technotes</a>
      </li>
    
      
      <li>
        <a href="/zedreads/">zedreads</a>
      </li>
    

    
    </ul>
  </ul>
</nav>
</header>


<div class="article-meta">
<h1><span class="title">Getting Started with Rake</span></h1>


</div>

<main>


<p>Rake is a task runner that uses <a href="https://www.ruby-lang.org/en/">Ruby</a>.</p>

<p>To get rake up and running, just run:</p>

<p><code>gem install rake</code></p>

<p>It&rsquo;s useful for running deploy scripts and generally getting things up and running in your dev environments.</p>

<p>What you need is a <code>Rakefile</code> in your dev environment&rsquo;s root folder (or wherever you want to run the <code>rake</code> command).</p>

<p>Write a Ruby script in the <code>Rakefile</code> and run <code>rake</code> — and it&rsquo;ll get to work.</p>

<h2 id="rakefile-syntax">Rakefile Syntax</h2>

<p>The basic unit of a Rakefile is a <code>task</code> function.</p>

<p>At the top level, you can define a &ldquo;default&rdquo; <code>task</code> that will run when you run <code>rake</code> with no arguments.</p>

<p>E.g.
{% highlight ruby %}
task :default =&gt; [:taskone, :tasktwo]</p>

<p>task :taskone do
    puts &ldquo;this is task one&rdquo;
end</p>

<p>task :tasktwo do
    puts &ldquo;this is task two&rdquo;
end
{% endhighlight %}</p>

<p>Running:</p>

<pre><code>$ rake
</code></pre>

<p>Outputs:
{% highlight bash %}
this is task one
this is task two
{% endhighlight %}</p>

<p>You can also run:</p>

<pre><code>$ rake tasktwo
</code></pre>

<p>Which will output:</p>

<pre><code>this is task two
</code></pre>

<h2 id="rake-namespaces">Rake Namespaces</h2>

<p>If you&rsquo;re making rakefiles which have to be merged with a larger project, you can set <code>namespaces</code> to prevent name conflicts with existing tasks in the project.</p>

<p>You set a <code>namespace</code> with the following syntax:
{% highlight ruby %}
namespace :namespace_one do
    task :taskone do
        puts &ldquo;this <em>task one</em> coexists with the other taskone&rdquo;
    end
end</p>

<p>task :default =&gt; [:taskone]</p>

<p>task :taskone do
    puts &ldquo;this is task one&rdquo;
end
{% endhighlight %}</p>

<p>Running <code>rake</code> will output:</p>

<pre><code>this is task one
</code></pre>

<p>But running <code>rake namespace_one:taskone</code> will output:</p>

<pre><code>this _task one_ coexists with the other taskone
</code></pre>

<p>NB:
<code>namespaces</code> are not functions and will not run like a <code>task</code></p>

<h2 id="running-shell-commands-with-rake">Running Shell Commands with Rake</h2>

<p>You can get Rake to run shell commands with the following syntax:</p>

<pre><code>task :runshell do
    sh &quot;touch raketest.rb&quot;
    sh 'echo &quot;p :hahahaha&quot; &gt; raketest.rb'
    ruby &quot;./raketest.rb&quot;
    sh &quot;rm ./raketest.rb&quot;
end
</code></pre>

<p>This will output:</p>

<pre><code>touch raketest.rb
echo &quot;p :hahahaha&quot; &gt; raketest.rb
/Users/zed/.rvm/rubies/ruby-2.3.0/bin/ruby ./raketest.rb
:hahahaha
rm ./raketest.rb
</code></pre>

<h2 id="adding-in-rake-documentation">Adding in-rake Documentation</h2>

<p>In-line comments are always a good way of documenting your code.</p>

<p>You can add in-rake documentation with the <code>desc</code> function.</p>

<p>Just add a <code>desc</code> before a task as such:</p>

<pre><code>desc &quot;this describes what task one does&quot;
task :taskone do
    puts &quot;this is task one&quot;
end
</code></pre>

<p>Running <code>rake --tasks</code> will output a list of tasks with their <code>desc</code>s attached.</p>

<p>E.g.</p>

<pre><code>taskone # this describes what task one does
</code></pre>

</main>

  <footer>
  never say doesn't mean don't have &copy; 2018 | <a href="mailto:zed@nsdmdh.com">zed@nsdmdh.com</a>

  
  </footer>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-7775600-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());

  gtag('config', 'UA-7775600-5');
</script>

  </body>
</html>

